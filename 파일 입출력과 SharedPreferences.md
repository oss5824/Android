# 파일 입출력과 SharedPreferences  
## 1.파일 입출력  
+ 안드로이드는 리눅스 위에 가상 머신이 동작하는 플랫폼  
+ 내부적으로 리눅스 기반의 파일 시스템으로 구성 됨  
+ 설치된 앱 하나당 리눅스 사용자 아이디와 그에 해당하는 디렉터리가 할당되며 각각의 디렉터리는 해당 사용자만 접근할 수 있음  
+ 이와 같이 특정앱의 사용자가 접근할 수 있는 영역을 내부 저장소라하고 모든 앱이 공용으로 사용할 수 있는 영역을 외부 저장소라고 함  
  - 내부저장소  
    * 내부 저장소는 설치한 앱에 제공되는 디렉터리  
    * 내부 저장소에는 주로 내 앱에서만 사용하는 데이터를 저장  
    * 예로 일기장과 같은 다른 앱과 공유할 필요가 없는 데이터를 내부 저장소에 저장  
    * 앱을 삭제하면 함께 삭제 됨  
  - 외부 저장소  
    * 외부 저장소는 모든 앱이 함께 사용할 수 있는 공간  
    * 외부 저장소에 저장된 파일에 접근하려면 앱의 매니페스트에 접근하려는 파일은 물론 외부 저장소 디렉터리의 권한을 명세해야 함  
    * 예로 다른 앱에서도 사용할 수 있는 사진,벨소리,음악 등을 모두 이곳에 보관할 수 있음   
   *앱이 제거된 뒤에도 저장되어있어야 함  
+ 파일의 기본 정보는 File클래스를 사용해서 간단하게 처리할 수 있음  
+ 파일의 실제 데이터를 읽고 쓰려면 스트림이라는 복잡한 클래스를 사용해야 함(스트림은 파일에 파이프를 하나 연결해 놓고 해당 파이프를 통해서 데이터를 꺼내오는 방식으로 동작)  
## 2.SharedPreferences  
+ 안드로이드 플랫폼은 간단한 데이터의 저장을 목적으로 SharedPreferences를 제공  
+ 앞에 나온 파일은 사용하기 까다롭고 외부 저장소에 저장할 때는 권한 설정이 필요하지만 SharedPreferences는 내부 저장소를 이용하기 때문에 권한설정이 필요 없고 간단한 코드로 사용 가능  
+ 주로 로그인 정보나 앱의 상태 정보를 저장하는 용도로 사용되고 액티비티에서 인텐트에 값을 넣고 빼는 것과 비슷한 형태로 동작  
+ SharedPreference를 사용할 때 값을 저장하기 위해서는 마지막에 꼭 apply()를 해줘야하지만 읽을 때는 필요하지 않음  
  *  저장단계  
     - 1단계: SharedPreference생성하기  
     - 2단계: Editor꺼내기  
     - 3단계: putInt(),putString() 메서드로 저장하기  
     - 4단계: apply()로 파일에 반영하기  
   * 읽기단계  
    - 1단계: SharedPreference생성하기  
    - 2단계: getInt(),getString() 메서드로 값 읽어오기  
+ getSharedPreferences()는 Context를 가지고 있는 모든 컴포넌트에서 접근과 호출이 가능함  
  - getSharedPreferences(이름,모드)를 액티비티에서 호출하면 SharedPreferences가 반환 됨  
+ 데이터를 저장하기 위해서는 Editor 인터페이스를 사용해야 하고 Editor 인터페이스는 edit()메서드를 호출해서 사용할 수 있음  
```kotlin  
val shared = getSharedPreferences("이름",Context.MODE_PRIVATE)  
val editor = shared.edit()  
editor.putString("키","값")  
editor.apply() //값을 저장할 때는 apply를 해줘야 함  
```  
+ 반면 데이터를 불러올 때는 Editor를 사용하는 단계가 없으며 SharedPreferences의 메서드를 직접 호출해서 데이터를 불러옴  
```kotlin  
val shared=getSharedPreferences("이름",Context.MODE_PRIVATE)  
shared.getString("키","기본값")  
```
+ apply()는 변경한 업데이트를 파일에 비동기적으로 저장하는 반면 commit()은 변경한 업데이트를 파일에 동기적으로 저장함  
  - commit은 동기 작업이므로 UI스레드에서 호출하는 것을 피해야 함  
  - 따라서 특별한 경우가 아니면 항상 apply메서드를 사용하는 것이 좋음  
 
